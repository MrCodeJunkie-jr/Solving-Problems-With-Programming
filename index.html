<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸ“˜ Course Assignment Reminder</title>

<!-- Inter font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- flatpickr (lightweight date/time picker) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
  :root{
    --bg: #0c0c0c;
    --card: #121212;
    --accent: #2e90ff;
    --accent-2: #1f78d1;
    --text: #eef2f7;
    --muted: #9aa7b2;
    --input: #0f0f0f;
  }

  *{box-sizing: border-box}
  body{
    margin:0;
    padding:40px 16px;
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  .wrap{
    width:100%;
    max-width:900px;
  }

  header{
    text-align:center;
    margin-bottom:26px;
  }
  h1{
    margin:0;
    color:var(--accent);
    font-size:1.8rem;
    font-weight:700;
    letter-spacing:0.4px;
  }
  p.lead{
    margin:8px 0 0;
    color:var(--muted);
    font-size:0.95rem;
  }

  /* form card */
  .card{
    background:var(--card);
    padding:22px;
    border-radius:12px;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    margin-bottom:28px;
    border: 1px solid rgba(255,255,255,0.03);
  }

  form .row{
    display:flex;
    gap:12px;
  }
  .col{
    flex:1;
  }

  label{
    display:block;
    color:var(--muted);
    font-size:0.85rem;
    margin-bottom:6px;
  }

  input[type="text"],
  textarea,
  input.flatpickr-input {
    width:100%;
    background:var(--input);
    color:var(--text);
    border:1px solid rgba(255,255,255,0.04);
    padding:10px 12px;
    border-radius:8px;
    font-size:0.95rem;
  }

  textarea{
    min-height:80px;
    resize:vertical;
  }

  .controls{
    margin-top:12px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
  }

  .btn{
    background:var(--accent);
    color:white;
    border:none;
    padding:10px 14px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    transition:background .18s;
  }
  .btn:hover{ background:var(--accent-2) }

  /* table card */
  .table-card{
    background:var(--card);
    border-radius:12px;
    padding:8px;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.03);
  }

  table{
    width:100%;
    border-collapse:collapse;
    color:var(--text);
    font-size:0.95rem;
  }
  thead th{
    text-align:left;
    font-size:0.78rem;
    letter-spacing:0.6px;
    color:var(--accent);
    padding:12px 12px;
    background:rgba(0,0,0,0.15);
    text-transform:uppercase;
    font-weight:600;
  }
  tbody td{
    padding:12px;
    border-top:1px solid rgba(255,255,255,0.03);
    vertical-align:middle;
  }

  tr:hover td{ background: rgba(255,255,255,0.01) }

  .muted{ color:var(--muted); font-size:0.9rem }
  .status{
    font-weight:600;
  }
  .completed{
    color:var(--muted);
    text-decoration:line-through;
  }

  .small-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--accent);
    padding:6px 10px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    font-size:0.85rem;
  }
  .small-btn:hover{ background:var(--accent); color:#071226 }

  footer{
    margin-top:28px;
    color:var(--muted);
    font-size:0.85rem;
    text-align:center;
  }

  /* responsive */
  @media (max-width:720px){
    .row{ flex-direction:column; }
    thead{display:none}
    table, tbody, tr, td{ display:block; width:100% }
    tr{ margin-bottom:12px; border-radius:8px; overflow:hidden; background:transparent }
    td{ padding:10px; border:none; background:var(--card); margin-bottom:6px }
    td::before{
      content: attr(data-label);
      display:block;
      font-size:0.78rem;
      color:var(--muted);
      margin-bottom:6px;
    }
    .controls{ justify-content:stretch; }
  }
</style>
</head>
<body>

<div class="wrap">
  <header>
    <h1>ðŸ“˜ Course Assignment Reminder</h1>
    <p class="lead">Add assignments, get reminders, and stay on top of deadlines.</p>
  </header>

  <section class="card" aria-labelledby="add-title">
    <form id="assignmentForm">
      <div class="row">
        <div class="col">
          <label for="title">Assignment Title</label>
          <input id="title" type="text" placeholder="e.g., Market Analysis Report" required>
        </div>
        <div class="col">
          <label for="course">Course</label>
          <input id="course" type="text" placeholder="e.g., Supply Chain Management" required>
        </div>
      </div>

      <div class="row" style="margin-top:12px;">
        <div class="col">
          <label for="dueDate">Due date & time</label>
          <input id="dueDate" type="text" placeholder="Select date & time" readonly required>
        </div>
        <div class="col">
          <label for="notes">Notes (optional)</label>
          <input id="notes" type="text" placeholder="Short note (e.g., submit via Moodle)">
        </div>
      </div>

      <div class="controls">
        <button class="btn" type="submit">Add Assignment</button>
      </div>
    </form>
  </section>

  <section style="margin-top:18px;">
    <div class="table-card">
      <table id="assignmentTable" role="table" aria-label="Assignments table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Course</th>
            <th>Due</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <footer>Â© 2025 Course Assignment Reminder â€” Designed by Pratik Raut</footer>
</div>

<!-- scripts -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
  // initialize flatpickr for reliable calendar/time picker
  flatpickr("#dueDate", {
    enableTime: true,
    dateFormat: "Y-m-d H:i",
    time_24hr: true,
    minDate: "today",
    defaultHour: 12
  });

  // ask for notification permissions
  if (Notification && Notification.permission !== "granted") {
    Notification.requestPermission().catch(()=>{});
  }

  const tbody = document.querySelector("#assignmentTable tbody");
  let assignments = JSON.parse(localStorage.getItem("assignments") || "[]");

  function save(){
    localStorage.setItem("assignments", JSON.stringify(assignments));
  }

  function formatDate(iso){
    try{
      const d = new Date(iso.replace(" ", "T"));
      if (isNaN(d)) return iso;
      return d.toLocaleString(undefined, {
        year: 'numeric', month: 'short', day: 'numeric',
        hour: '2-digit', minute: '2-digit'
      });
    }catch(e){ return iso }
  }

  function render(){
    tbody.innerHTML = "";
    if (assignments.length === 0){
      const tr = document.createElement("tr");
      tr.innerHTML = `<td colspan="5" style="padding:18px; color:var(--muted); text-align:center">No assignments yet â€” add your first assignment above.</td>`;
      tbody.appendChild(tr);
      return;
    }

    assignments.forEach((a, i) => {
      const tr = document.createElement("tr");

      // desktop labels
      const titleTd = document.createElement("td");
      titleTd.textContent = a.title;
      titleTd.setAttribute("data-label","Title");

      const courseTd = document.createElement("td");
      courseTd.textContent = a.course;
      courseTd.setAttribute("data-label","Course");

      const dueTd = document.createElement("td");
      dueTd.textContent = formatDate(a.dueDate);
      dueTd.setAttribute("data-label","Due");

      const statusTd = document.createElement("td");
      statusTd.setAttribute("data-label","Status");
      if (a.completed){
        statusTd.innerHTML = `<span class="completed">Completed</span>`;
      } else {
        statusTd.innerHTML = `<span class="status">Pending</span>`;
      }

      const actionTd = document.createElement("td");
      actionTd.setAttribute("data-label","Action");
      if (!a.completed){
        const btn = document.createElement("button");
        btn.className = "small-btn";
        btn.textContent = "Mark done";
        btn.onclick = ()=>{ markDone(i) };
        actionTd.appendChild(btn);
      } else {
        const del = document.createElement("button");
        del.className = "small-btn";
        del.textContent = "Remove";
        del.onclick = ()=>{ remove(i) };
        actionTd.appendChild(del);
      }

      tr.appendChild(titleTd);
      tr.appendChild(courseTd);
      tr.appendChild(dueTd);
      tr.appendChild(statusTd);
      tr.appendChild(actionTd);

      tbody.appendChild(tr);
    });
  }

  function addAssignment(obj){
    assignments.push(obj);
    save();
    render();
  }

  function markDone(index){
    assignments[index].completed = true;
    save();
    render();
  }

  function remove(index){
    if (!confirm("Remove this assignment?")) return;
    assignments.splice(index,1);
    save();
    render();
  }

  document.getElementById("assignmentForm").addEventListener("submit", (e)=>{
    e.preventDefault();
    const title = document.getElementById("title").value.trim();
    const course = document.getElementById("course").value.trim();
    const dueDate = document.getElementById("dueDate").value.trim(); // "YYYY-MM-DD HH:MM"
    const notes = document.getElementById("notes").value.trim();

    if (!title || !course || !dueDate){
      alert("Please fill title, course and due date.");
      return;
    }

    // store a notified flag to prevent repeated notifications
    addAssignment({ title, course, dueDate, notes, completed: false, notified: false });

    // reset form
    e.target.reset();
    flatpickr("#dueDate").clear();
  });

  // check reminders every 30 seconds, mark notified to avoid duplicate
  function checkReminders(){
    const now = new Date();
    assignments.forEach((a, idx) => {
      if (a.completed || a.notified) return;
      const due = new Date(a.dueDate.replace(" ", "T"));
      const diffHours = (due - now) / 1000 / 3600;
      if (diffHours > 0 && diffHours <= 24){
        // show notification once
        if (Notification && Notification.permission === "granted"){
          new Notification("ðŸ“¢ Assignment Reminder", {
            body: `${a.title} (${a.course}) is due ${formatDate(a.dueDate)}`,
            silent: false
          });
        } else {
          // fallback: small alert inside page (console-friendly)
          console.log("Reminder:", a.title, a.dueDate);
        }
        assignments[idx].notified = true;
        save();
        render();
      }
    });
  }

  // initial render and start interval
  render();
  // run immediately to catch any due items right away, then every 30s
  checkReminders();
  setInterval(checkReminders, 30000);
</script>
</body>
</html>
